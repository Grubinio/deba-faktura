{% extends "base.html" %}
{% block title %}Import-Vorschau{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1>Import-Vorschau</h1>

  {% if groups %}
    {% for account, rows in groups.items() %}
      <h2 class="mt-5">{{ account }}</h2>
      <table class="table table-striped table-sm">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Buchung</th>
            <th>Wertstellung</th>
            <th class="text-end">Betrag</th>
            <th>Begünstigter</th>
            <th>Verwendungszweck</th>
            <th>Buchungstext</th>
            <th>Original Konto</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
          <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.buchung|datum_de }}</td>
            <td>{{ r.wertstellung|datum_de }}</td>
            <td class="text-end">{{ r.betrag|currency }}</td>
            <td>{{ r.beguenstigter or '–' }}</td>
            <td>{{ r.verwendungszweck or '–' }}</td>
            <td>{{ r.buchungstext or '–' }}</td>
            <td>{{ r.kontoname }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endfor %}
  {% else %}
    <p class="text-muted">Noch keine Rohdaten importiert.</p>
  {% endif %}

  <a href="{{ url_for('importer.upload') }}" class="btn btn-secondary mt-3">
    &laquo; Zurück zum Import
  </a>
</div>
{% endblock %}
