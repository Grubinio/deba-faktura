{% extends "base.html" %}
{% block title %}Import: Datei hochladen{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1>Zahlungsdaten importieren</h1>

  <form method="post" enctype="multipart/form-data">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <div class="mb-3">
      <label for="file" class="form-label">Wähle eine XLSX- oder CSV-Datei</label>
      <input
        class="form-control"
        type="file"
        id="file"
        name="file"
        accept=".xlsx,.xls,.csv"
        required
      >
    </div>
    <button type="submit" class="btn btn-primary">Datei hochladen</button>
  </form>

  {# Flash-Messages anzeigen #}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mt-3">
        {% for category, msg in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Schließen"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <hr>

  <p>
    Nachdem der Import abgeschlossen ist, kannst du dir hier die Vorschau ansehen:
    <a href="{{ url_for('importer.preview') }}">Zur Import-Vorschau &raquo;</a>
  </p>
</div>
{% endblock %}
